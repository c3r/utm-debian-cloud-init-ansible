#cloud-config
hostname: {{ name }}

users:
  - name: debian
    sudo: ALL=(ALL) NOPASSWD:ALL
    shell: /bin/bash
    ssh_authorized_keys:
      - {{ ssh_key }}

package_update: true
package_upgrade: false

{% if network_mode == "dhcp" %}
network:
  version: 2
  ethernets:
    eth0:
      dhcp4: true
{% else %}
network:
  version: 2
  ethernets:
    eth0:
      dhcp4: false
      addresses:
        - {{ ip }}/24
      gateway4: {{ gateway }}
      nameservers:
        addresses: {{ dns }}
{% endif %}
